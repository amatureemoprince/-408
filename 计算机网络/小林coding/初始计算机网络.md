​	关于学习小林coding的图解计算机网络的一些笔记和见解。

# 大体认识

​	关于计算机网络的最重要的网络模型的层次：在小林coding中写的是应用层、传输层、网络层、网络接口层

（tcp/ip四层模型）。在学校的学习中是将网络接口层细分为数据链路层和物理层（OSI七层模型），当然怎样分

都是有一定道理的，不用过度纠结。

重要的是这种分层的思想，在对应的层只实现这一层的功能，下一层总是为上一层提供必要的服务。

​	关于每层的**功能和作用：**

​		**应用层：**在平常生活中使用的所有应用都是在这一层中存在，这一层是专心为用户提供功能：包括

http（浏览器和服务器传输数据的协议）、ftp（传输文件）、dns（通过域名获取ip）、smtp（发邮箱）等。

如果不同的应用想要交互信息数据就要将数据传递到下一层。应用层是在OS的用户态工作，其余的层都是在OS的

内核态工作的。这里提到了用户态和内核态，他们的区别也很简单。在用户态状态下计算机不能直接访问硬件资源

而且不能执行特权指令，收到了OS的权限约束。而在内核态就是可以直接访问硬件资源而且可以执行特权指令。

这样的设计可以更好的保护我们的系统和提高性能。

​		**传输层：**上一层产生的数据想要传输就需要传输层的服务，也是为应用层提供网络支持（负责向两台终

端设备进程间的通信提供通用的数据传输服务）。在这一层有两个重要的协议，就是tcp和udp协议。这也是贯穿

整个计算机网络的两个词汇。他们有啥区别呢？tcp是可靠的连

接，具有重传机制，校验机制、拥塞控制等保障数据正确的协议，而udp协议就不用管这么多了，只要把数据发出

去就不管了。说到这里是不是觉得udp协议实在是太不负责任了，可以一个事物的存在必然有他的合理性，虽然说

在数据保障这里是它的弱势，但是正是由于没有了那么多的“包袱”所以在传输速率上非常快，因为这个特性可以在

一些需要高实时性的地方使用udp协议，比如视频通话。而且在tcp拥有的哪些机制，可以在使用udp的同时在应

用层实现数据保障的机制，只是说需要一定的技术水平，哈哈。还需要说到的是传输层在传输应用层传来的数据时

如果超过了MSS（tcp最大报文长度）就需要分块，如果在传输过程中丢失了块也就只需要重新传输丢失的块而不

用将全部的数据进行重传了。这里说到了在不同的应用间进行传输数据，在一台设备上往往会有多个应用，我们需

要怎样才能将传输的数据传给正确的应用呢？在这里我们就需要端口号了，通过端口号分别不同的应用。常见的有

web服务器的80。

​		**网络层：**负责为分组交换网上的不同主机提供通信服务。在这一层使用的通常是ip协议，它会在传输层

的报文前面再加上ip头形成ip报文，如果这个长度超过了MTU（以太网中通常为1500字节）就会进行分片，然后

就可以将数据发往网络世界中了。我们需要知道，网络世界是很大的，机器也是非常多的，那它怎样知道需要将

数据传到哪里呢。在网络的世界里，每个机器都是有自己的标号的，采用的是ipv4协议，32为二进制组成的一串

数字每8位为一小组。虽然是有编号了，但是肯定不是一个一个去判断每一个机器是不是我需要传输的对象撒，不

然的话今天发的消息，可能明天才能收得到了。这里使用了一个方法，就是先找到机器所处的子网然后再将数据传

输到该子网中进行判断，这样的效率要高许多。说到这里就要引出**网络号和主机号**的概念了。网络号是区别这个主

机在哪一个子网直接锁定到一个小的区域再根据主机号确定数据要发送到的主机。举个例子：比如10.24.123.1/24

后面的24就是子网掩码，也可以是255.255.255.0这样表示子网掩码。网络号通过这个ip和子网掩码做与运算就可

以得到，主机号就是将网络号取反就可以了。ip协议有个很重要的功能就是路由，它可以使用它的算法去找到下一

个要发送的路由器是哪一个。

​		**网络接口层：**上一层的网络层将数据传递下来后，这一层会在数据前面再添一个mac帧头和帧尾。这个

的作用和ip是很相似的也是去找对应的机器，因为根据ip去找是在网络层的实现，在这一层都是与硬件相关的。在

以太网中就不适用ip了，所以需要使用mac去匹配机器，可以使用arp协议映射ip和mac的值，这样就可以将数据

发向正确的机器了。