# 相关概念
移动 IP 技术移动节点（计算机/服务器等）以固定的网络 IP 地址，实现跨越不同网段的漫游功能，并保证了基于网络 IP 的网络权限在漫游过程中不发生任何改变。

## 移动节点
具有永久 IP 地址的移动设备，可以跑到多个网络中去。

## 归属代理（本地代理）
移动站原始连接的网络称为归属网络

一个移动结点的永久“居所”称为归属网络，在归属网络中代表移动结点执行移动管理功能的实体称为归属代理

就是归属网络上的边界路由器

## 永久地址（归属地址/主地址）
移动站点在归属网络中的原始地址

## 外部代理（外地代理）
在外部网络中帮助移动节点进行数据转发的路由器

## 转交地址
外部代理给在被访问网络中的主机分配的一个用于转发数据报的地址，动态分配的。



过程：
一个主机 B 需要向主机 A 发送数据报嘛，如果主机 A 在归属网络中则按照传统的 TCP/IP 方式进行通信。

如果主机 A 跑到另一个网络中（被访问网络）并且使用了移动 IP 技术，则开始一段奇妙之旅。首先需要向外地代理进行登记，获得一个临时的转交地址（根据我们所学习的知识，这一步应该是通过 DHCP 协议进行的）

然后向 A 的归属代理登记 A 的转交地址，归属代理知道了转交地址后会建立一条通向转交地址的隧道，用于截获发送给 A 的 IP 分组并进行再封装，并通过隧道发送给被访问网络的外地代理。外地代理将封装后的 IP 进行拆封为原始的 IP 分组后发送给移动站 A。

上述是移动站 A 接受 IP 数据报的过程，那么移动站如果要发送 IP 数据报呢？

发送时使用自己的永久地址作为 IP 分组的原地址，并使用外部代理进行转发。

最后如果移动站 A 回到了归属网络中，A 要向归属代理注销转发地址。

# 网络层应该增加的功能
为了支持移动性，在网络层还应该增加一些功能：

+ 移动站到外地代理的登记协议
+ 外地代理到对归属代理的登记协议
+ 归属代理数据报封装协议
+ 外地代理拆封协议

# 举个栗子
这个在书上有个非常生动的例子。

用一个通俗的例子来描述移动IP的通信原理。例如，在以前科技不那么发达的年代，本科毕业时都将走向各自的工作岗位。因为事先并不知道自己未来的准确通信地址，所以怎样继续和同学们保持联系呢？实际上也很简单。彼此留下各自的家庭地址（永久地址）。毕业后若要和某同学联系，只要写信寄到该同学的永久地址，再请其家长把信件转交即可。

