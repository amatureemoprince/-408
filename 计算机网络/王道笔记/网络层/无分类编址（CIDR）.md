# 知识总览
![画板](https://cdn.nlark.com/yuque/0/2025/jpeg/48073730/1738977317318-f00f925b-9ec6-456e-b5ac-9a27e645ec8d.jpeg)

当时互联网在民用领域大放异彩，因为每台主机都至少需要一个 IP，所以 IP 地址数量告急。

传统的分类有个痛点：如果需要给一个机构分配一个子网并且该机构有 2000 台主机，因为分类的限制所以只能分配 B 类，但是 B 类的一个子网就可以有 6 万多个 IP，这就造成了资源分配不合理的情况，加速了 IP 的消耗。所以提出 CIDR 分类的方式替代传统的分类方式。

# 无分类编址
还是以上面的为例：某机构需要 2000 个 IP，此时采用 CIDR 就可以分配一个网络前缀有 21 位的 CIDR 地址块，此时主机号有 11 为，可以分配给 2048 台主机，已经够用了。



在某个机构获得了 CIDR 地址块后还可以对其进行划分为多个子网。

## 定长子网划分
在一个 CIDR 地址块中，把主机号前 k bit 抠出来作为定长子网，这样就能划分出 2^k 个子网（每个子网包含的 IP 地址块相等）

也就是说和之前的传统子网划分的原理一样，只不过是在 CIDR 地址块中进行的。

缺点：每个子网分配的 IP 地址数相同，不够灵活，还是容易造成浪费。

## 变长子网划分
在一个 CIDR 地址块中，划分子网时，子网号长度不固定（每个子网包含的 IP 地址块大小不同）
CIDR 地址块的子网划分技巧：可以利用类似于“从根到叶构造二叉哈夫曼树”的技巧

+ 原始 CIDR 地址块作为根节点（假设可以自由分配的主机号占 n bit）
+ 每个分支节点必须同时拥有左右孩子，左 0，右 1（反过来也行）
+ 每个叶子结点对应一个子网，根据根节点到达叶子结点的路径来分析子网对应的 IP 地址块范围
+ 整棵树的高度不能超过 n - 1，因为主机号的位数必须大于 1（主机号不能全 0 或 1）

![](https://cdn.nlark.com/yuque/0/2025/png/48073730/1738980994705-84a13592-d761-4219-ab52-da24fcd589d1.png)

如：给旺财的分配的网络前缀为：根节点的网络号 + 根节点到旺财节点路径上的值（1 0）

这就可以快速地获得某个子网的网络号了。



![](https://cdn.nlark.com/yuque/0/2025/png/48073730/1738981176757-e46b57cd-a988-4b9d-87b6-3c15f370124b.png)
选 C

因为需要有 128 个子网所以需要分配给子网网络号的位数要有 7 位，所以对应的主机号就是 9 位，总共 512 个 IP，但是全 0 或全 1 不能使用，所以可以分配的就为 510 个。 

