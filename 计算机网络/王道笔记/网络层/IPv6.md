# IPv6 的数据格式
![](https://cdn.nlark.com/yuque/0/2025/png/48073730/1739495131781-4ccbcc8c-9507-40ce-990f-eea5b84a2fba.png)
用以解释一下上面的字段含义：

+ 版本：始终为 6
+ 优先级：在网络上从特定源地址到目的地址的一系列数据报，所有属于同一个流的数据报都具有同样的流标签
+ 有效载荷长度：真正的数据部分长度
+ 下一个首部：表示扩展首部或者上层协议首部
+ 跳数限制：相当于 IPv4 中的 TTL（能通过路由器的个数）

# IPv4 和 IPv6
+ IPv6 将地址从 32 位扩大到了 128 位，可以表示更多的 IP 地址
+ IPv6 将 IPv4 的检验和字段彻底移除，减少了路由器上的处理时间
+ IPv6 将 IPv4 的可选字段移除首部，变为了扩展首部，成为灵活的首部格式，路由器通常不对扩展首部进行检查，大大提高了路由器的处理效率
+ IPv6 支持即插即用（自动配置），不需要 DHCP 协议给其分配 IP 地址
+ IPv6 只能在主机处分片，IPv4 可以在路由器和主机处分片
+ IPv6 在 ICMP 协议上有个“分组过大”的报文类型
+ IPv6 支持资源的预分配，支持实时视像等要求。保证一定的带宽和时延的应用
+ IPv6 取消了协议字段，改成了下一个首部字段
+ IPv6 取消了总长度字段，改用有效载荷长度字段
+ IPv6 取消了服务类型字段

# IPv6 表示形式
## 一般形式
冒号十六进制记法：如下

![](https://cdn.nlark.com/yuque/0/2025/png/48073730/1739791072281-43dd4f50-9f17-400f-8a39-7d8aa0406dff.png)

IPv6 使用 128 位表示一个地址并使用 16 位一组。

## 压缩形式
如果有多个连续的 0 在一起可以删除，但是每个分组中都至少需要一位数据

如：

![](https://cdn.nlark.com/yuque/0/2025/png/48073730/1739791214118-6e7b32db-8ba4-4a25-9045-c96857c7b1bc.png)

除此之外还有个零压缩的形式：一连串连续的 0 可以使用一对冒号取代。如下：

![](https://cdn.nlark.com/yuque/0/2025/png/48073730/1739791327019-7c966ab0-6b74-44d2-a4fd-62df332af694.png)

需要注意的是一个地址中的一对冒号只能出现一次，不能出现多次。

# IPv6 基本地址类型
## 单播
一对一通信。可以作为源地址或者目的地址

## 组播
一对多通信。只能作为目的地址。不同的目的主机可以加入同一个组播组，这样就可以将数据报同时发送给在同一个组播组中的每一个主机了。

## 任播
实质是一对一，形式是一对多。和一个组播组中的一台主机进行通信。

# IPv4 向 IPv6 的转换
## 双栈协议
就是说在一台设备上同时启用 IPv4 协议栈和 IPv6 协议栈。这样的话，这台设备技能和 IPv4 网络通信又能和 IPv6 网络通信。如果这台设备是一个路由器，那么这台路由器的不同接口上，分别配置了 IPv4 地址和 IPv6 地址，并很可能分别连接了 IPv4 网络和 IPv6 网络。如果这台设备是一个计算机，那么它将同事拥有 IPv4 地址和 IPv6 地址，并具备同时处理这两个协议地址的功能。

## 隧道技术
就是对数据进行再次包装。

通过使用互联网络的基础设施在网络之间传递数据的方式，使用隧道传递的数据可以是不同协议的数据帧或包。隧道协议将其他协议的数据帧或包重新封装然后通过隧道发送。



