# 知识总览
![画板](https://cdn.nlark.com/yuque/0/2025/jpeg/48073730/1738933117438-df5c98fd-d833-429f-a19a-ff4e9d3fd22d.jpeg)

在主机间进行通信时首先需要判断两者是否是处于同一个子网中，在传统的网络分类中可以简单的比较 IP 地址的前 n 位是否相等，而在可以进行子网划分的网络中就不能这样比较了，需要给不同子网中的主机分配子网掩码，这样进行判断的时候使用主机号和子网掩码作与运算得出来的结果才是实际的网络前缀，才能判断是否处于同一个子网中。

# 流程
![画板](https://cdn.nlark.com/yuque/0/2025/jpeg/48073730/1738937808135-9ad2a39c-0fc7-4eda-9589-3cd1fe437e38.jpeg)

主机在发生帧之前先需要判断是否在同一个子网当中，若在，则不用将帧发送给默认路由，否则将帧发送给默认路由并将其传递给网络层，网络层让目的 IP 地址与路由表中的子网掩码依次与运算，如果算出来的结果与网络前缀对的起，就将该帧发送到对应的接口中，帧就发送到目的地址中了，途中可以会有多次路由器但原理都是这样的。还有一种情况就是目的 IP 地址所处的子网中还是采用的传统子网划分，看是 A、B、C 哪一类，采用的是默认子网掩码，有多少位网络号对应的掩码就是多少位 1。这样就可以使用同一种算法进行判断发送了。当然如果所有的子网掩码和目的网络号都无法匹配就轮到默认路由出马了，此时会匹配到子网掩码全为 0，目的网络号也全为 0,的接口，该帧就会从这个接口中传递出去。 

![画板](https://cdn.nlark.com/yuque/0/2025/jpeg/48073730/1738977179425-58b92cc5-a5ba-4485-9320-c6792a378c4a.jpeg)

