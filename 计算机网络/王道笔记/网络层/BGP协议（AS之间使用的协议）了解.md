![](https://cdn.nlark.com/yuque/0/2025/png/48073730/1739972354542-4d4274dc-be21-4a42-96fc-9882d89beed2.png)

在 BGP 协议中每个 AS 会确定一个 BGP 发言人，通常来说就是边界路由器。

BGP 发言人会与其相邻的 BGP 发言人交换信息；

交换的是网络可达性的信息，就是要到达某个网络所要经历的一系列 AS

在发生变化时更新发生变化的部分

# BGP 交换信息的过程
![](https://cdn.nlark.com/yuque/0/2025/png/48073730/1739973080512-1b8d67eb-ac10-4362-82f2-5559523cb6b4.png)

BGP 发言人交换路径向量。

主干网还可以发出通知：要到达 N1、N2、N3、N4 可以经过 AS1 、AS2（也就是上面说的“一系列 AS”）

# BGP 协议报文格式
![](https://cdn.nlark.com/yuque/0/2025/png/48073730/1740013225798-60c4f85c-b49a-4ef1-8c72-9b51ed1239b1.png)

通过建立 TCP 连接以达到交换 BGP 报文建立 BGP 会话，然后通过 BGP 会话进行路由信息交换。

故 BGP 是应用层协议

# BGP 的特点
+ 支持 CIDR，所以 BGP 路由器应该包含目的网络前缀、下一跳路由器地址，和要到达该网络的 AS 序列
+ 在 BGP 刚开始运行时，BGP 邻站交换的是整个 BGP 路由表，但在以后只需要在发生变化时更新变化的部分则可。

# BGP 的四种报文
1. OPEN 报文：用来于相邻的另一个 BGP 发言人建立关系，并认证发送方
2. UPDATE 报文：通告新路径或撤销原路径
3. KEEPALIVE 报文：在没有 UPDATE 报文时，周期性证实邻站的连通性；也作为 OPEN 报文的确认
4. NOTIFICATION 报文：报告先前报文的差错；也被用于关闭连接

# 三种协议的比较
直接上图

![](https://cdn.nlark.com/yuque/0/2025/png/48073730/1740014187809-1a3de0c2-c6d4-481b-a907-36df4bdb65ea.png)





