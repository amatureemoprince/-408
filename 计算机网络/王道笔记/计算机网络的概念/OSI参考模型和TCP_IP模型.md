<h2 id="y8Aa4">总览</h2>
![画板](https://cdn.nlark.com/yuque/0/2024/jpeg/48073730/1735385049745-255848bc-a423-43d6-a3bb-cd3a28897cb3.jpeg)

<h2 id="Wwg3L">常见网络设备的功能层次</h2>
日常生活中常见的有网线、路由器、交换机等等，那他们的功能层次是在哪一层呢？（注意在功能层次的一层就代表在此层之下的所有层都实现了）
物理层：集线器

数据链路层：交换机

网络层：路由器

第零层：网线、双绞线等传输媒体

<h2 id="NdzdB">OSI 参考模型</h2>
<h3 id="SzA5j">物理层</h3>
实现两个节点之间数据的 bit（0、1） 传输

+ 需定义电路接口参数（如形状、大小、引脚数等）
+ 需定义传输信号的含义、电器特征（如 5V 表示 1,1V 表示 0；每比特信号持续时间 0.1ms）

这里使用 bit 传输信号的话，可以由于外界的干扰会导致表示的 1 到接收方那里变为了 0。所以为了确保正确性就引入了数据链路层

<h3 id="Rbz4F">数据链路层</h3>
确保相邻节点之间的链路逻辑上无差错

+ 差错控制：检错+纠错或者检错+丢弃+重传
+ 流量控制：协调两个节点之间发送帧的速率

数据链路层会一次性传递多个 bit 并加上用于差错检验的 bit 而形成的帧。接受方在接收到这个帧后会检查是否出差错，没有则去掉多余的 bit 并将数据往上层传输

在数据的发送过程中往往是需要在多个节点之间进行转发的所以寻找下一跳的功能就放到了网络层中

<h3 id="xTS2H">网络层</h3>
把分组（数据报）从源节点转发到目的节点

+ 路由选择：构造并维护路由表，决定分组到达目的节点的最佳路径
+ 分组转发：将分组从合适的端口转发出去
+ 拥塞控制：发现网络拥塞，并采取措施缓解拥塞
+ 网际互联：实现异构网络互联（不在乎局域网中的实现方式）
+ 其他功能：差错控制、流量控制、建立连接与释放、可靠传输管理（接收方需要返回分组确认消息）

网络层的差错控制是以分组为单位的，数据链路层的是以帧为单位的。数据链路层保障了局部的正确性，而网络层要保障全局的正确性。同理流量控制也是这样的。建立连接和释放是说在数据传输前先建立一条虚电路，可以保障分组有序、不重复的到达，结束后释放虚电路。

到这一步就已经完成主机到主机的分组传输了，但是一个主机上有不同的进程，到底这个数据是哪一个进程的就需要传输层的帮忙了。

<h3 id="y4JCm">传输层</h3>
实现端口到端口的通信（进程到进程的通信）

这一层传输的数据称为报文段

+ 复用和分用：发送端几个高层实体复用一条底层的连接，接收端进行分用（发送方几个实体都向一个连接里发送数据，接收方几个实体都从这个连接中获取数据）
+ 其他功能：差错控制、流量控制、连接的建立与释放、可靠传输的管理

这个其他功能与上面的本质一样只不过对象变为了报文段而已，就不赘言了。

<h3 id="qgTKV">会话层</h3>
管理进程间会话

+ 会话管理：采用检查点机制，当通信失效时从检查点继续恢复通信

就是断点续传的意思。比如：两个人之间使用微信传输文件，如果传输到某处断了（检查点），等恢复连接后会直接从检查点处继续传输数据

<h3 id="jceA9">表示层</h3>
解决不同主机上信息表示不一致的问题

比如：两台主机对数据编码格式不一样

+ 数据格式转化：编码转化、压缩/解压、加密/解密

<h3 id="WR9Xy">应用层</h3>
实现特定的网络应用（传输的数据称为报文）

功能繁多根据应用需求进行设计

<h2 id="f1r5d">TCP/IP 模型</h2>
在网络应用中并不是所有的应用都需要会话层和表示层故在此模型中将其砍掉了，如果需要有特定的功能实现就使用应用层的特定协议。将这些不是必要的层次中的功能放在应用层进行实现是非常灵活的，应用需要就加不需要就不加，这样更加合理。

在 OSI 模型中物理层会规定具体的网线接口等硬件设备，但是 TCP/IP 模型的理念是网络硬件设备的种类很多不应该有过多的限制，基于这样的理念，TCP/IP 模型将网络层一下的都归为网络接口层。

<h3 id="aZ0qG">网络接口层</h3>
实现相邻节点之间的数据传输（为网络层传输分组），但具体怎样传输不作规定

<h3 id="pB8cr">网络层</h3>
<h3 id="eYm8s">传输层</h3>
<h3 id="GVcsA">应用层</h3>
与 OSI 模型大体一样，在这里说明不一样的地方：
如果像 OSI 模型一样在每一层进行数据的差错控制等操作会让网络的核心部分变得复杂，路由器的压力会较大，造价也会提高。所以 TCP/IP 模型中网络层就不用管差错控制、连接的建立和释放、可靠传输管理，只需要尽自己最大努力将数据交付给下一跳，并且差错控制等功能放在了传输层，这样的设计使得网络核心部分的压力变小了，造价也降低了（数据的传输更快了），这样将压力给到了网络边缘部分的主机，也就是我们的电脑（需要差错检验等功能），如果采用的是 TCP/IP 协议同样是可以保证数据的正确性的，但采用 UDP 的话就不能保证了。

OSI 模型的网络层向上层不仅提供了有连接可靠的服务（虚电路）有提供了无连接不可靠的服务（数据报）

TCP/IP 模型的网络层向上层只能提供无连接不可靠的服务（数据报）

